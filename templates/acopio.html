{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">

  <!-- 1. Visualizaci칩n del modelo ML -->
  <h3 class="text-center">游늳 Predicci칩n de Acopio por Mes</h3>
  <div class="text-center mb-4">
    <img src="{{ url_for('static', filename='images/grafico_acopio.png') }}" alt="Gr치fico de Acopio" class="img-fluid rounded shadow">
  </div>
  <div class="card mb-4">
    <div class="card-body">
      <p>Este gr치fico compara el volumen real de acopio por mes con la predicci칩n generada por un modelo de <strong>Machine Learning</strong> basado en regresi칩n lineal. La l칤nea naranja representa la estimaci칩n del modelo, 칰til para identificar patrones estacionales y apoyar decisiones de compra o inversi칩n.</p>
    </div>
  </div>

  <!-- 2. Estad칤sticas desde enero 2024 -->
  <h4>游늵 Estad칤sticas recientes (desde enero 2024)</h4>
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card text-white bg-primary mb-3">
        <div class="card-header">Mes con mayor volumen</div>
        <div class="card-body">
          <h5 class="card-title">{{ mes_max_vol }}</h5>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-white bg-success mb-3">
        <div class="card-header">Departamento destacado</div>
        <div class="card-body">
          <h5 class="card-title">{{ depto_max_vol if depto_max_vol else 'No disponible' }}</h5>
        </div>
      </div>
    </div>
  </div>

  <!-- 3. Interacci칩n con el usuario -->
  <h4>游빍 Explora por a침o</h4>
  <form method="POST" action="/acopio">
    <div class="row mb-3">
      <div class="col-md-4">
        <label for="anio" class="form-label">Selecciona un a침o:</label>
        <select name="anio" id="anio" class="form-select">
          {% for a in a침os_disponibles %}
            <option value="{{ a }}">{{ a }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <button type="submit" class="btn btn-outline-primary">Filtrar</button>
      </div>
    </div>
  </form>

  {% if resultados_usuario %}
  <div class="mt-4">
    <h5>游댌 Resultados para {{ resultados_usuario.anio }}</h5>
    <ul>
      <li><strong>Mes con mayor volumen:</strong> {{ resultados_usuario.mes_vol }}</li>
      <li><strong>Mes con mejor precio:</strong> {{ resultados_usuario.mes_precio }}</li>
      <li><strong>Departamento destacado:</strong> {{ resultados_usuario.depto }}</li>
    </ul>
  </div>
  {% endif %}

</div>
{% endblock %}
